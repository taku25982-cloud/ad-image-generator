# 広告画像ジェネレーター 要件定義書

## 1. プロジェクト概要

### 1.1 プロダクト名
**広告画像ジェネレーター** (Ad Image Generator)

### 1.2 概要
AIを活用して、様々なプラットフォーム向けの広告画像を簡単に生成できるWebアプリケーション。テンプレートベースの作成とAI画像生成を組み合わせ、効果的な広告クリエイティブを短時間で作成可能。

### 1.3 ターゲットユーザー
- 個人事業主・フリーランス
- 中小企業のマーケティング担当者
- ECサイト運営者
- SNSマーケター
- 副業でアフィリエイトを行う個人

---

## 2. 技術スタック

| カテゴリ | 技術 |
|---------|------|
| フロントエンド | Next.js 14+ (App Router) |
| バックエンド | Next.js API Routes |
| 認証 | Firebase Authentication (Google認証) |
| データベース | Firebase Firestore |
| ストレージ | Cloudflare R2 |
| 決済 | Stripe |
| AI画像生成 | Google Gemini 3 Pro (Image Preview) |
| デプロイ | Cloudflare Pages |

---

## 3. 機能要件

### 3.1 認証機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| AUTH-001 | Googleログイン | Firebase AuthでGoogleアカウント認証 | 必須 |
| AUTH-002 | ログアウト | セッションを終了しログアウト | 必須 |
| AUTH-003 | 認証状態の永続化 | ブラウザを閉じても認証状態を維持 | 必須 |

### 3.2 広告画像生成機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| GEN-001 | AI画像生成 | Gemini 3 Proを使用した広告画像生成 | 必須 |
| GEN-002 | テンプレート選択 | 用途別テンプレートからの選択 | 必須 |
| GEN-003 | フォーマット選択 | SNS/Amazon/バナー等のサイズ選択 | 必須 |
| GEN-004 | 入力フォーム | 商品情報・ブランド情報の入力 | 必須 |
| GEN-005 | プレビュー表示 | 生成前のプレビュー確認 | 必須 |
| GEN-006 | 再生成 | 気に入らない場合の再生成（クレジット消費） | 必須 |

### 3.3 AI編集機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| EDIT-001 | AI画像編集 | 生成した画像をAIで編集・調整 | 必須 |
| EDIT-002 | テキスト変更 | キャッチコピー等のテキスト変更 | 必須 |
| EDIT-003 | カラー調整 | 色味やトーンの調整 | 高 |

### 3.4 履歴・保存機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| HIST-001 | 生成履歴 | 過去に生成した広告画像の履歴表示 | 必須 |
| HIST-002 | 画像ダウンロード | 生成画像のダウンロード（PNG/JPG） | 必須 |
| HIST-003 | 履歴削除 | 不要な履歴の削除 | 高 |

### 3.5 課金・クレジット機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| PAY-001 | クレジット残高表示 | 現在のクレジット残高を表示 | 必須 |
| PAY-002 | サブスクリプション契約 | Stripeでの月額プラン契約 | 必須 |
| PAY-003 | プラン変更 | 上位/下位プランへの変更 | 必須 |
| PAY-004 | 解約 | サブスクリプションの解約 | 必須 |
| PAY-005 | クレジット追加購入 | 追加クレジットの購入 | 低（将来実装） |

---

## 4. 対応フォーマット

### 4.1 SNS広告
| プラットフォーム | サイズ | アスペクト比 |
|-----------------|--------|-------------|
| Instagram フィード | 1080 x 1080px | 1:1 |
| Instagram ストーリー | 1080 x 1920px | 9:16 |
| Facebook 広告 | 1200 x 628px | 1.91:1 |
| X (Twitter) | 1200 x 675px | 16:9 |
| TikTok | 1080 x 1920px | 9:16 |
| YouTube サムネイル | 1280 x 720px | 16:9 |
| Pinterest | 1000 x 1500px | 2:3 |

### 4.2 EC・マーケットプレイス
| プラットフォーム | サイズ | 備考 |
|-----------------|--------|------|
| Amazon メイン画像 | 2000 x 2000px | 白背景推奨 |
| Amazon サブ画像 | 1500 x 1500px | - |
| 楽天市場 | 700 x 700px | - |
| Yahoo!ショッピング | 600 x 600px | - |

### 4.3 バナー広告
| サイズ名 | サイズ | 用途 |
|---------|--------|------|
| レクタングル（大） | 336 x 280px | GDN/YDA |
| レクタングル（中） | 300 x 250px | GDN/YDA |
| ビッグバナー | 728 x 90px | PC向け |
| モバイルバナー | 320 x 50px | スマホ向け |
| スカイスクレイパー | 160 x 600px | サイドバー |

---

## 5. 入力項目

### 5.1 必須入力項目
| 項目名 | 説明 | 入力タイプ |
|--------|------|-----------|
| 商品/サービス名 | 広告する商品やサービスの名前 | テキスト |
| キャッチコピー | メインのキャッチコピー | テキスト |
| 広告フォーマット | 出力サイズの選択 | セレクト |

### 5.2 オプション入力項目
| 項目名 | 説明 | 入力タイプ |
|--------|------|-----------|
| 商品説明 | 商品の詳細説明 | テキストエリア |
| ターゲット層 | 想定する顧客層 | テキスト/セレクト |
| ブランドカラー | メインカラー・アクセントカラー | カラーピッカー |
| ロゴ画像 | ブランドロゴのアップロード | ファイル |
| 商品画像 | 商品画像のアップロード | ファイル |
| 雰囲気・トーン | おしゃれ、ポップ、高級感等 | セレクト |
| CTA（行動喚起） | 「今すぐ購入」「詳細はこちら」等 | テキスト/セレクト |
| 価格情報 | 表示する価格や割引情報 | テキスト |
| 使用シーン | どんな場面で使う商品か | テキスト |

---

## 6. 料金プラン

### 6.1 プラン一覧

| プラン名 | 月額料金 | クレジット/月 | AI編集 | 履歴保存 |
|---------|---------|--------------|--------|---------|
| Free | ¥0 | 3（初回のみ） | ❌ | 7日間 |
| Starter | ¥980 | 50 | ✅ | 30日間 |
| Pro | ¥1,980 | 200 | ✅ | 90日間 |
| Business | ¥4,980 | 1,000 | ✅ | 無制限 |

### 6.2 クレジット消費
| アクション | 消費クレジット |
|-----------|---------------|
| 画像生成 | 1クレジット |
| AI編集 | 1クレジット |
| 再生成 | 1クレジット |

### 6.3 将来的な追加機能
- クレジットの追加購入（従量課金）
- 年間プラン割引

---

## 7. データベース設計（概要）

### 7.1 コレクション構成
```
users/
  └── {userId}/
        ├── profile (サブコレクション)
        ├── subscription
        └── credits

generations/
  └── {generationId}/
        ├── userId
        ├── imageUrl
        ├── prompt
        ├── format
        ├── createdAt
        └── metadata

templates/
  └── {templateId}/
        ├── name
        ├── category
        ├── thumbnail
        └── config
```

---

## 8. 非機能要件

### 8.1 パフォーマンス
- ページ読み込み: 3秒以内
- 画像生成: 30秒以内
- API応答: 500ms以内

### 8.2 セキュリティ
- Firebase Authenticationによる認証
- Firestore Security Rulesによるアクセス制御
- APIキーの適切な管理（環境変数）
- R2へのアクセスは署名付きURL経由

### 8.3 可用性
- Cloudflare Pagesによる高可用性
- エラー時のユーザーへの適切なフィードバック

---

## 9. 画面一覧

| 画面ID | 画面名 | 概要 |
|--------|--------|------|
| SCR-001 | ランディングページ | サービス紹介・料金表示 |
| SCR-002 | ログイン画面 | Google認証ボタン |
| SCR-003 | ダッシュボード | クレジット残高・最近の生成履歴 |
| SCR-004 | 広告作成画面 | テンプレート選択・入力フォーム |
| SCR-005 | 生成結果画面 | 生成画像表示・編集・ダウンロード |
| SCR-006 | 履歴画面 | 過去の生成履歴一覧 |
| SCR-007 | 設定画面 | プラン管理・アカウント設定 |
| SCR-008 | 料金プラン画面 | プラン比較・契約 |

---

## 10. 今後の拡張可能性

- チーム機能（共有・コラボレーション）
- API提供（外部連携）
- バッチ生成機能
- A/Bテスト用バリエーション生成
- 動画広告対応
- 多言語対応
