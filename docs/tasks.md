# 広告画像ジェネレーター 開発タスク一覧

## フェーズ1: プロジェクト初期設定

### 1.1 開発環境構築
- [ ] Next.js 14プロジェクト作成（App Router）
- [ ] TypeScript設定
- [ ] ESLint/Prettier設定
- [ ] Tailwind CSS設定
- [ ] 環境変数テンプレート作成（.env.example）

### 1.2 Firebase設定
- [ ] Firebaseプロジェクト作成
- [ ] Firebase Authentication有効化（Google認証）
- [ ] Firestore Database作成
- [ ] Firestoreセキュリティルール設定
- [ ] Firebase Admin SDK設定

### 1.3 外部サービス設定
- [ ] Cloudflare R2バケット作成
- [ ] R2アクセスキー設定
- [ ] Stripeアカウント設定
- [ ] Stripe商品・価格設定（4プラン）
- [ ] Gemini API設定

### 1.4 デプロイ環境構築
- [ ] Cloudflare Pages設定
- [ ] 環境変数設定（本番）
- [ ] ドメイン設定（必要に応じて）

---

## フェーズ2: 認証機能実装

### 2.1 Firebase Auth統合
- [ ] Firebase クライアント初期化
- [ ] Googleログイン実装
- [ ] ログアウト実装
- [ ] 認証状態の永続化

### 2.2 認証UI
- [ ] ログインページ作成
- [ ] ログインボタンコンポーネント
- [ ] ユーザーメニューコンポーネント
- [ ] 認証ガード（保護ルート）

### 2.3 ユーザー管理
- [ ] 新規ユーザー作成時の初期処理
- [ ] 初期クレジット（3）付与
- [ ] ユーザープロファイル管理

---

## フェーズ3: 基本UI実装

### 3.1 レイアウト
- [ ] ヘッダーコンポーネント
- [ ] サイドバーコンポーネント
- [ ] フッターコンポーネント
- [ ] ナビゲーション

### 3.2 共通コンポーネント
- [ ] Buttonコンポーネント
- [ ] Cardコンポーネント
- [ ] Inputコンポーネント
- [ ] Selectコンポーネント
- [ ] Modalコンポーネント
- [ ] Loadingコンポーネント
- [ ] Toastコンポーネント

### 3.3 ページ作成
- [ ] ランディングページ
- [ ] ダッシュボードページ
- [ ] 広告作成ページ
- [ ] 履歴ページ
- [ ] 設定ページ
- [ ] 料金プランページ

---

## フェーズ4: 広告生成機能実装

### 4.1 テンプレート機能
- [ ] テンプレートデータ設計
- [ ] テンプレート一覧表示
- [ ] テンプレート選択UI

### 4.2 フォーマット選択
- [ ] フォーマット定義（SNS/EC/バナー）
- [ ] フォーマット選択UI
- [ ] サイズプレビュー表示

### 4.3 入力フォーム
- [ ] 必須項目フォーム
- [ ] オプション項目フォーム
- [ ] カラーピッカー実装
- [ ] 画像アップロード機能
- [ ] バリデーション実装

### 4.4 AI画像生成
- [ ] Gemini API連携
- [ ] プロンプト生成ロジック
- [ ] 画像生成API実装（/api/generate）
- [ ] 生成進捗表示
- [ ] エラーハンドリング

### 4.5 生成結果
- [ ] 結果表示画面
- [ ] 再生成機能
- [ ] ダウンロード機能（PNG/JPG）

---

## フェーズ5: ストレージ連携（Cloudflare R2）

### 5.1 R2設定
- [ ] R2クライアント設定
- [ ] アップロード処理実装
- [ ] 署名付きURL生成

### 5.2 画像管理
- [ ] 画像保存処理
- [ ] 画像取得処理
- [ ] 画像削除処理

---

## フェーズ6: AI編集機能実装

### 6.1 編集機能
- [ ] AI編集API実装（/api/edit）
- [ ] 編集UIコンポーネント
- [ ] テキスト変更機能
- [ ] カラー調整機能

### 6.2 プラン制限
- [ ] 無料プランでの編集機能制限
- [ ] 有料プランでの編集機能解放

---

## フェーズ7: 履歴機能実装

### 7.1 履歴保存
- [ ] Firestoreへの履歴保存
- [ ] メタデータ設計・保存

### 7.2 履歴表示
- [ ] 履歴一覧ページ
- [ ] 履歴カードコンポーネント
- [ ] ページネーション

### 7.3 履歴管理
- [ ] 履歴削除機能
- [ ] プランに応じた保存期間制限

---

## フェーズ8: 課金機能実装

### 8.1 クレジットシステム
- [ ] クレジット残高表示
- [ ] クレジット消費処理
- [ ] クレジット不足時の処理

### 8.2 Stripe連携
- [ ] Stripeクライアント設定
- [ ] Checkout Session作成
- [ ] Webhook設定（/api/webhook/stripe）
- [ ] サブスクリプション処理

### 8.3 プラン管理
- [ ] プラン一覧表示
- [ ] プラン契約処理
- [ ] プラン変更処理
- [ ] 解約処理
- [ ] 月次クレジット付与

---

## フェーズ9: 最終調整

### 9.1 UI/UX改善
- [ ] レスポンシブ対応
- [ ] アニメーション追加
- [ ] エラー表示改善
- [ ] ローディング状態改善

### 9.2 パフォーマンス
- [ ] 画像最適化
- [ ] コード分割
- [ ] キャッシング設定

### 9.3 セキュリティ
- [ ] セキュリティルール最終確認
- [ ] 環境変数確認
- [ ] CORS設定確認

### 9.4 テスト
- [ ] 認証フローテスト
- [ ] 画像生成テスト
- [ ] 決済フローテスト
- [ ] E2Eテスト

### 9.5 デプロイ
- [ ] 本番環境デプロイ
- [ ] 動作確認
- [ ] モニタリング設定

---

## 将来の拡張（Phase 2以降）

### クレジット追加購入
- [ ] 従量課金商品設定
- [ ] 購入フロー実装
- [ ] 決済処理追加

### その他機能
- [ ] 年間プラン追加
- [ ] チーム機能
- [ ] API提供
- [ ] 多言語対応

---

## 見積もり時間（目安）

| フェーズ | 想定時間 |
|---------|---------|
| フェーズ1: 初期設定 | 4-6時間 |
| フェーズ2: 認証機能 | 3-4時間 |
| フェーズ3: 基本UI | 8-12時間 |
| フェーズ4: 広告生成 | 12-16時間 |
| フェーズ5: ストレージ | 4-6時間 |
| フェーズ6: AI編集 | 6-8時間 |
| フェーズ7: 履歴機能 | 4-6時間 |
| フェーズ8: 課金機能 | 8-12時間 |
| フェーズ9: 最終調整 | 6-8時間 |
| **合計** | **55-78時間** |
