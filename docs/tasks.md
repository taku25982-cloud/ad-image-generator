# 広告画像ジェネレーター 開発タスク一覧

## フェーズ1: プロジェクト初期設定

### 1.1 開発環境構築
- [x] Next.js 14プロジェクト作成（App Router）
- [x] TypeScript設定
- [x] ESLint/Prettier設定
- [x] Tailwind CSS設定
- [x] 環境変数テンプレート作成（.env.example）

### 1.2 Firebase設定
- [x] Firebaseプロジェクト作成
- [x] Firebase Authentication有効化（Google認証）
- [x] Firestore Database作成
- [x] Firestoreセキュリティルール設定
- [x] Firebase Admin SDK設定

### 1.3 外部サービス設定
- [ ] Cloudflare R2バケット作成
- [ ] R2アクセスキー設定
- [ ] Stripeアカウント設定
- [ ] Stripe商品・価格設定（4プラン）
- [x] Gemini API設定

### 1.4 デプロイ環境構築
- [ ] Cloudflare Pages設定
- [ ] 環境変数設定（本番）
- [ ] ドメイン設定（必要に応じて）

---

## フェーズ2: 認証機能実装

### 2.1 Firebase Auth統合
- [x] Firebase クライアント初期化
- [x] Googleログイン実装
- [x] ログアウト実装
- [x] 認証状態の永続化

### 2.2 認証UI
- [x] ログインページ作成
- [x] ログインボタンコンポーネント
- [x] ユーザーメニューコンポーネント
- [x] 認証ガード（保護ルート）

### 2.3 ユーザー管理
- [x] 新規ユーザー作成時の初期処理
- [x] 初期クレジット（3）付与
- [x] ユーザープロファイル管理

---

## フェーズ3: 基本UI実装

### 3.1 レイアウト
- [x] ヘッダーコンポーネント
- [x] サイドバーコンポーネント
- [x] フッターコンポーネント
- [x] ナビゲーション

### 3.2 共通コンポーネント
- [x] Buttonコンポーネント
- [x] Cardコンポーネント
- [x] Inputコンポーネント
- [x] Selectコンポーネント
- [x] Modalコンポーネント
- [x] Loadingコンポーネント
- [x] Toastコンポーネント

### 3.3 ページ作成
- [x] ランディングページ
- [x] ダッシュボードページ
- [x] 広告作成ページ
- [x] 履歴ページ
- [x] 設定ページ
- [x] 料金プランページ

---

## フェーズ4: 広告生成機能実装

### 4.1 テンプレート機能
- [ ] テンプレートデータ設計
- [ ] テンプレート一覧表示
- [ ] テンプレート選択UI

### 4.2 フォーマット選択
- [x] フォーマット定義（SNS/EC/バナー）
- [x] フォーマット選択UI
- [x] サイズプレビュー表示

### 4.3 入力フォーム
- [x] 必須項目フォーム
- [x] オプション項目フォーム
- [x] カラーピッカー実装
- [x] 画像アップロード機能（参考画像）
- [x] バリデーション実装

### 4.4 AI画像生成
- [x] Gemini API連携
- [x] プロンプト生成ロジック
- [x] 画像生成API実装（/api/generate）
- [x] 生成進捗表示
- [x] エラーハンドリング

### 4.5 生成結果
- [x] 結果表示画面
- [x] 再生成機能
- [x] ダウンロード機能（PNG/JPG）


---

## フェーズ5: ストレージ連携（Cloudflare R2）

### 5.1 R2設定
- [ ] R2クライアント設定
- [ ] アップロード処理実装
- [ ] 署名付きURL生成

### 5.2 画像管理
- [ ] 画像保存処理
- [ ] 画像取得処理
- [ ] 画像削除処理

---

## フェーズ6: AI編集機能実装

### 6.1 編集機能
- [x] AI編集API実装（/api/edit）
- [x] 編集UIコンポーネント
- [x] テキスト変更機能
- [x] カラー調整機能

### 6.2 プラン制限
- [x] 無料プランでの編集機能制限
- [x] 有料プランでの編集機能解放

---

## フェーズ7: 履歴機能実装

### 7.1 履歴保存
- [x] Firestoreへの履歴保存
- [x] メタデータ設計・保存

### 7.2 履歴表示
- [x] 履歴一覧ページ
- [x] 履歴カードコンポーネント
- [ ] ページネーション

### 7.3 履歴管理
- [ ] 履歴削除機能
- [ ] プランに応じた保存期間制限

---

## フェーズ8: 課金機能実装

### 8.1 クレジットシステム
- [x] クレジット残高表示
- [x] クレジット消費処理
- [x] クレジット不足時の処理

### 8.2 Stripe連携
- [ ] Stripeクライアント設定
- [ ] Checkout Session作成
- [ ] Webhook設定（/api/webhook/stripe）
- [ ] サブスクリプション処理

### 8.3 プラン管理
- [ ] プラン一覧表示
- [ ] プラン契約処理
- [ ] プラン変更処理
- [ ] 解約処理
- [ ] 月次クレジット付与

---

## フェーズ9: 最終調整

### 9.1 UI/UX改善
- [ ] レスポンシブ対応
- [ ] アニメーション追加
- [ ] エラー表示改善
- [ ] ローディング状態改善

### 9.2 パフォーマンス
- [ ] 画像最適化
- [ ] コード分割
- [ ] キャッシング設定

### 9.3 セキュリティ
- [ ] セキュリティルール最終確認
- [ ] 環境変数確認
- [ ] CORS設定確認

### 9.4 テスト
- [ ] 認証フローテスト
- [ ] 画像生成テスト
- [ ] 決済フローテスト
- [ ] E2Eテスト

### 9.5 デプロイ
- [ ] 本番環境デプロイ
- [ ] 動作確認
- [ ] モニタリング設定

---

## 将来の拡張（Phase 2以降）

### クレジット追加購入
- [ ] 従量課金商品設定
- [ ] 購入フロー実装
- [ ] 決済処理追加

### その他機能
- [ ] 年間プラン追加
- [ ] チーム機能
- [ ] API提供
- [ ] 多言語対応

---

## 見積もり時間（目安）

| フェーズ | 想定時間 |
|---------|---------|
| フェーズ1: 初期設定 | 4-6時間 |
| フェーズ2: 認証機能 | 3-4時間 |
| フェーズ3: 基本UI | 8-12時間 |
| フェーズ4: 広告生成 | 12-16時間 |
| フェーズ5: ストレージ | 4-6時間 |
| フェーズ6: AI編集 | 6-8時間 |
| フェーズ7: 履歴機能 | 4-6時間 |
| フェーズ8: 課金機能 | 8-12時間 |
| フェーズ9: 最終調整 | 6-8時間 |
| **合計** | **55-78時間** |
